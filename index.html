<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recruiter Search - Prompt + Filters Prototype</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: #f5f5f5;
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            padding: 30px;
        }

        h1 {
            font-size: 24px;
            margin-bottom: 8px;
            color: #0a66c2;
        }

        .subtitle {
            color: #666;
            font-size: 14px;
            margin-bottom: 24px;
        }

        .search-section {
            margin-bottom: 24px;
        }

        .search-box {
            display: flex;
            gap: 12px;
            margin-bottom: 16px;
        }

        #searchInput {
            flex: 1;
            padding: 12px 16px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 15px;
            transition: border-color 0.2s;
        }

        #searchInput:focus {
            outline: none;
            border-color: #0a66c2;
        }

        .btn-primary {
            padding: 12px 32px;
            background: #0a66c2;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s;
        }

        .btn-primary:hover {
            background: #084d94;
        }

        .btn-secondary {
            padding: 8px 16px;
            background: white;
            color: #0a66c2;
            border: 2px solid #0a66c2;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-secondary:hover {
            background: #f0f7ff;
        }

        .example-prompts {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .example-prompt {
            padding: 6px 12px;
            background: #f0f7ff;
            border: 1px solid #0a66c2;
            border-radius: 4px;
            font-size: 13px;
            color: #0a66c2;
            cursor: pointer;
            transition: all 0.2s;
        }

        .example-prompt:hover {
            background: #0a66c2;
            color: white;
        }

        .constraints-section {
            margin-bottom: 24px;
            padding: 20px;
            background: #f9f9f9;
            border-radius: 6px;
            min-height: 80px;
        }

        .constraints-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .constraints-title {
            font-size: 14px;
            font-weight: 600;
            color: #666;
        }

        .tags-container {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 12px;
        }

        .tag {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 8px 12px;
            background: white;
            border: 2px solid #0a66c2;
            border-radius: 6px;
            font-size: 14px;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .tag-value {
            font-weight: 600;
            color: #0a66c2;
        }

        .tag-source {
            font-size: 12px;
            color: #666;
        }

        .tag-remove {
            background: none;
            border: none;
            color: #666;
            font-size: 18px;
            cursor: pointer;
            padding: 0;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: color 0.2s;
        }

        .tag-remove:hover {
            color: #d32f2f;
        }

        .empty-state {
            color: #999;
            font-size: 14px;
            font-style: italic;
        }

        .add-filter-section {
            display: flex;
            gap: 8px;
            align-items: center;
        }

        #filterDropdown {
            padding: 8px 12px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
            cursor: pointer;
        }

        .warning {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            background: #fff3cd;
            border: 1px solid #ffecb5;
            border-radius: 6px;
            margin-bottom: 16px;
            animation: slideIn 0.3s ease;
        }

        .warning-icon {
            font-size: 20px;
        }

        .warning-text {
            flex: 1;
            font-size: 14px;
            color: #856404;
        }

        .warning-dismiss {
            background: none;
            border: none;
            color: #856404;
            cursor: pointer;
            font-size: 20px;
            padding: 0;
        }

        .results-section {
            margin-bottom: 24px;
        }

        .results-count {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 16px;
            color: #333;
            transition: all 0.3s ease;
        }

        .results-count.updating {
            opacity: 0.5;
            transform: scale(0.98);
        }

        .candidate-card {
            padding: 16px;
            background: white;
            border: 1px solid #ddd;
            border-radius: 6px;
            margin-bottom: 12px;
            transition: box-shadow 0.2s;
        }

        .candidate-card:hover {
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .candidate-name {
            font-size: 16px;
            font-weight: 600;
            color: #0a66c2;
            margin-bottom: 4px;
        }

        .candidate-title {
            font-size: 14px;
            color: #666;
            margin-bottom: 8px;
        }

        .candidate-details {
            display: flex;
            gap: 16px;
            font-size: 13px;
            color: #666;
        }

        .candidate-detail {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .footer {
            margin-top: 32px;
            padding-top: 16px;
            border-top: 1px solid #ddd;
            text-align: center;
            color: #999;
            font-size: 13px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Candidate Search</h1>
        <p class="subtitle">Combine natural language with structured filters</p>

        <!-- Search Section -->
        <div class="search-section">
            <div class="search-box">
                <input 
                    type="text" 
                    id="searchInput" 
                    placeholder="Try: 'senior backend engineer Python Berlin remote'" 
                />
                <button class="btn-primary" onclick="handleSearch()">Search</button>
            </div>
            <div class="example-prompts">
                <span style="font-size: 13px; color: #666; margin-right: 8px;">Try:</span>
                <div class="example-prompt" onclick="setPrompt('senior backend engineer Python Berlin remote')">
                    Senior Backend Engineer
                </div>
                <div class="example-prompt" onclick="setPrompt('Head of Sales fintech Spanish English Mexico City')">
                    Head of Sales
                </div>
                <div class="example-prompt" onclick="setPrompt('data scientist healthcare MLOps Bay Area 5 years')">
                    Data Scientist
                </div>
            </div>
        </div>

        <!-- Warning (hidden by default) -->
        <div id="warningBox" style="display: none;"></div>

        <!-- Active Constraints Section -->
        <div class="constraints-section">
            <div class="constraints-header">
                <span class="constraints-title">Active Constraints:</span>
            </div>
            <div class="tags-container" id="tagsContainer">
                <span class="empty-state">No constraints applied</span>
            </div>
            <div class="add-filter-section">
                <select id="filterDropdown" onchange="addManualFilter()">
                    <option value="">+ Add filter</option>
                    <option value="experience">5+ years experience</option>
                    <option value="onsite">On-site</option>
                    <option value="hybrid">Hybrid</option>
                    <option value="manager">Manager level</option>
                    <option value="english">English required</option>
                </select>
            </div>
        </div>

        <!-- Results Section -->
        <div class="results-section">
            <div class="results-count" id="resultsCount">Enter a search to see results</div>
            <div id="candidatesContainer"></div>
        </div>

        <div class="footer">
            MVP Prototype - Prompt + Filters Integration | FounderNest Case Study
        </div>
    </div>

    <script>
        let activeTags = [];
        let candidateCount = 0;
        let conflictData = null;

        const extractionRules = {
            'senior': { type: 'seniority', value: 'Senior' },
            'junior': { type: 'seniority', value: 'Junior' },
            'mid': { type: 'seniority', value: 'Mid-level' },
            'backend': { type: 'title', value: 'Backend Engineer' },
            'frontend': { type: 'title', value: 'Frontend Engineer' },
            'fullstack': { type: 'title', value: 'Fullstack Engineer' },
            'data scientist': { type: 'title', value: 'Data Scientist' },
            'head of sales': { type: 'title', value: 'Head of Sales' },
            'python': { type: 'skill', value: 'Python' },
            'javascript': { type: 'skill', value: 'JavaScript' },
            'java': { type: 'skill', value: 'Java' },
            'mlops': { type: 'skill', value: 'MLOps' },
            'berlin': { type: 'location', value: 'Berlin' },
            'mexico city': { type: 'location', value: 'Mexico City' },
            'bay area': { type: 'location', value: 'Bay Area' },
            'remote': { type: 'work', value: 'Remote' },
            'spanish': { type: 'language', value: 'Spanish' },
            'english': { type: 'language', value: 'English' },
            'fintech': { type: 'industry', value: 'Fintech' },
            'healthcare': { type: 'industry', value: 'Healthcare' },
            '5 years': { type: 'experience', value: '5+ years' },
            '5+': { type: 'experience', value: '5+ years' }
        };

        const manualFilterMap = {
            'experience': { type: 'experience', value: '5+ years' },
            'onsite': { type: 'work', value: 'On-site' },
            'hybrid': { type: 'work', value: 'Hybrid' },
            'manager': { type: 'seniority', value: 'Manager' },
            'english': { type: 'language', value: 'English' }
        };

        const candidatePool = [
            {
                name: 'Jane Doe',
                title: 'Senior Backend Engineer',
                company: 'Tech Startup',
                location: 'Berlin, Germany',
                work: 'Remote',
                experience: '6 years',
                skills: ['Python', 'AWS', 'Docker']
            },
            {
                name: 'Carlos Rodriguez',
                title: 'Backend Developer',
                company: 'Scale AI',
                location: 'Madrid, Spain',
                work: 'Hybrid',
                experience: '4 years',
                skills: ['Python', 'Django', 'PostgreSQL']
            },
            {
                name: 'Anna Schmidt',
                title: 'Full Stack Engineer',
                company: 'FinTech Co',
                location: 'Berlin, Germany',
                work: 'On-site',
                experience: '5 years',
                skills: ['Python', 'React', 'Node.js']
            },
            {
                name: 'Sarah Chen',
                title: 'Senior Data Scientist',
                company: 'Healthcare AI Labs',
                location: 'San Francisco, CA (Bay Area)',
                work: 'Hybrid',
                experience: '7 years',
                skills: ['MLOps', 'Python', 'TensorFlow', 'Healthcare Data']
            },
            {
                name: 'Michael O\'Brien',
                title: 'Data Scientist',
                company: 'MedTech Solutions',
                location: 'Oakland, CA (Bay Area)',
                work: 'Remote',
                experience: '5 years',
                skills: ['MLOps', 'Python', 'Clinical Analytics']
            },
            {
                name: 'Ana Martinez',
                title: 'Head of Sales',
                company: 'Fintech Global',
                location: 'Mexico City, Mexico',
                work: 'On-site',
                experience: '8 years',
                skills: ['B2B Sales', 'Fintech', 'Spanish', 'English']
            }
        ];

        function setPrompt(text) {
            document.getElementById('searchInput').value = text;
            handleSearch();
        }

        function handleSearch() {
            const input = document.getElementById('searchInput').value.toLowerCase();
            if (!input.trim()) return;

            activeTags = [];
            
            for (const [keyword, tag] of Object.entries(extractionRules)) {
                if (input.includes(keyword)) {
                    const exists = activeTags.find(t => t.type === tag.type && t.value === tag.value);
                    if (!exists) {
                        activeTags.push({
                            ...tag,
                            source: 'prompt'
                        });
                    }
                }
            }

            updateUI();
        }

        function showWarning(message, oldTag = null, newTag = null) {
            conflictData = { oldTag, newTag };
            const warningBox = document.getElementById('warningBox');
            
            let actionButtons = '';
            if (oldTag && newTag) {
                actionButtons = `
                    <div style="display: flex; gap: 8px; margin-left: auto;">
                        <button class="btn-secondary" style="padding: 6px 12px; font-size: 13px;" onclick="resolveConflict('keep-new')">Keep ${newTag.value}</button>
                        <button class="btn-secondary" style="padding: 6px 12px; font-size: 13px;" onclick="resolveConflict('keep-old')">Keep ${oldTag.value}</button>
                        <button class="btn-secondary" style="padding: 6px 12px; font-size: 13px;" onclick="resolveConflict('keep-both')">Keep Both</button>
                    </div>
                `;
            }
            
            warningBox.innerHTML = `
                <div class="warning">
                    <span class="warning-icon">‚ö†Ô∏è</span>
                    <span class="warning-text">${message}</span>
                    ${actionButtons}
                    <button class="warning-dismiss" onclick="hideWarning()">√ó</button>
                </div>
            `;
            warningBox.style.display = 'block';
        }

        function resolveConflict(action) {
            if (!conflictData) return;
            
            if (action === 'keep-new') {
                hideWarning();
            } else if (action === 'keep-old') {
                activeTags = activeTags.filter(t => 
                    !(t.type === conflictData.newTag.type && t.value === conflictData.newTag.value)
                );
                activeTags.push(conflictData.oldTag);
                hideWarning();
                updateUI();
            } else if (action === 'keep-both') {
                activeTags.push(conflictData.oldTag);
                hideWarning();
                updateUI();
            }
            
            conflictData = null;
        }

        function hideWarning() {
            document.getElementById('warningBox').style.display = 'none';
        }

        function addManualFilter() {
            const select = document.getElementById('filterDropdown');
            const filterKey = select.value;
            if (!filterKey) return;

            const filter = manualFilterMap[filterKey];
            
            if (filter.type === 'work') {
                const existingWork = activeTags.find(t => t.type === 'work');
                if (existingWork && existingWork.value !== filter.value) {
                    const oldTag = { ...existingWork };
                    showWarning(
                        `Filter '${filter.value}' conflicts with ${existingWork.source === 'prompt' ? 'prompt' : 'filter'} '${existingWork.value}'`,
                        oldTag,
                        filter
                    );
                    activeTags = activeTags.filter(t => t.type !== 'work');
                }
            }

            const exists = activeTags.find(t => t.type === filter.type && t.value === filter.value);
            if (!exists) {
                activeTags.push({
                    ...filter,
                    source: 'manual'
                });
            }

            select.value = '';
            updateUI();
        }

        function removeTag(index) {
            activeTags.splice(index, 1);
            hideWarning();
            updateUI();
        }

        function updateUI() {
            const tagsContainer = document.getElementById('tagsContainer');
            
            if (activeTags.length === 0) {
                tagsContainer.innerHTML = '<span class="empty-state">No constraints applied</span>';
                candidateCount = 0;
            } else {
                tagsContainer.innerHTML = activeTags.map((tag, index) => `
                    <div class="tag">
                        <span class="tag-value">${tag.value}</span>
                        <span class="tag-source">(${tag.source === 'prompt' ? 'from prompt' : 'manual'})</span>
                        <button class="tag-remove" onclick="removeTag(${index})">√ó</button>
                    </div>
                `).join('');

                candidateCount = Math.max(10, 150 - (activeTags.length * 20) - Math.floor(Math.random() * 30));
            }

            updateResults();
        }

        function updateResults() {
            const resultsCount = document.getElementById('resultsCount');
            const candidatesContainer = document.getElementById('candidatesContainer');

            resultsCount.classList.add('updating');
            
            setTimeout(() => {
                if (candidateCount === 0) {
                    resultsCount.textContent = 'Enter a search to see results';
                    candidatesContainer.innerHTML = '';
                } else {
                    resultsCount.textContent = `${candidateCount} candidates found`;

                    const samplesToShow = candidatePool.slice(0, 3);
                    candidatesContainer.innerHTML = samplesToShow.map(candidate => `
                        <div class="candidate-card">
                            <div class="candidate-name">${candidate.name}</div>
                            <div class="candidate-title">${candidate.title} at ${candidate.company}</div>
                            <div class="candidate-details">
                                <div class="candidate-detail">üìç ${candidate.location}</div>
                                <div class="candidate-detail">üíº ${candidate.work}</div>
                                <div class="candidate-detail">‚è±Ô∏è ${candidate.experience}</div>
                                <div class="candidate-detail">üîß ${candidate.skills.join(', ')}</div>
                            </div>
                        </div>
                    `).join('');
                }
                
                resultsCount.classList.remove('updating');
            }, 200);
        }
    </script>
</body>
</html>
```
